parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"AeE5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.element=t}return t.prototype.getStyle=function(t){return(this.element.ownerDocument||document).defaultView.getComputedStyle(this.element,null).getPropertyValue(t)},t.prototype.setStyle=function(t,e,n){this.element.style.setProperty(t,e,n?"important":null)},t.prototype.clearInlineStyles=function(){this.element.style=""},t.prototype.getAttribute=function(t){return this.element.getAttribute(t)},t.prototype.on=function(t,e,n){return this.element.addEventListener(t,function(t){e(t)},n),this},t.prototype.once=function(t,e){return this.on(t,e,{once:!0})},t.prototype.getText=function(){return this.element.textContent},t.prototype.setText=function(t){this.element.textContent=t},t.prototype.getKey=function(){return this.element.getAttribute("data-live-edit")},t.prototype.addClass=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.element.classList).add.apply(t,e)},t.prototype.removeClass=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.element.classList).remove.apply(t,e)},t.prototype.toggleClass=function(t,e){return this.element.classList.toggle(t,e)},t.prototype.hasClass=function(t){return this.element.classList.contains(t)},t.prototype.getBoundingClientRect=function(){return this.element.getBoundingClientRect()},t}();exports.default=t;
},{}],"xB0r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t+"px"},i=function(){function i(){}return i.findPosition=function(t,i){i.clearInlineStyles(),i.removeClass(this.$classPrefix+"position-bottom"),i.removeClass(this.$classPrefix+"position-top"),i.removeClass(this.$classPrefix+"position-left"),i.removeClass(this.$classPrefix+"position-right"),i.removeClass(this.$classPrefix+"position-center");var s=this.bottomPossitionPossible(t,i),o=!1;s||(s=this.topPossitionPossible(t,i)),s&&((o=this.leftPossitionPossible(t,i))||(o=this.rightPossitionPossible(t,i))),s&&o||i.addClass(this.$classPrefix+"position-center")},i.bottomPossitionPossible=function(i,s){var o=this.getPositionData(i,s),e=o.top+o.targetHeight;return e+o.editorHeight<o.viewportEnd&&(s.setStyle("top",t(e)),s.addClass(this.$classPrefix+"position-bottom"),!0)},i.topPossitionPossible=function(i,s){var o=this.getPositionData(i,s),e=o.top-o.editorHeight;return e>o.viewportStart&&(s.setStyle("top",t(e-15)),s.addClass(this.$classPrefix+"position-top"),!0)},i.leftPossitionPossible=function(i,s){var o=this.getPositionData(i,s),e=o.left;return e+o.editorWidth<o.viewportXEnd&&(s.setStyle("left",t(e)),s.addClass(this.$classPrefix+"position-left"),!0)},i.rightPossitionPossible=function(i,s){var o=this.getPositionData(i,s),e=o.left+o.targetWidth-o.editorWidth;return e>o.viewportXStart&&(s.setStyle("left",t(e)),s.addClass(this.$classPrefix+"position-right"),!0)},i.getPositionData=function(t,i){var s=t.getBoundingClientRect(),o=i.getBoundingClientRect(),e=window.scrollX,r=window.scrollY,n=r,l=e;return{scrolledLeft:e,scrolledTop:r,left:e+s.x,top:r+s.y,targetWidth:s.width,targetHeight:s.height,editorWidth:o.width,editorHeight:o.height,viewportStart:n,viewportEnd:window.innerHeight+n,viewportXStart:l,viewportXEnd:window.innerWidth+l}},i.$classPrefix="live-edit__",i}();exports.default=i;
},{}],"hjI6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){}return e.prototype.post=function(e,t){return void 0===t&&(t=null),this.request("post",e,t)},e.prototype.request=function(e,t,n){return void 0===n&&(n=null),this.type=e,this.url=t,this.data=n,this.send()},e.prototype.getData=function(){var e=null===this.data?{}:this.data;return JSON.stringify(e)},e.prototype.getCsrfHeaderName=function(){return window.live_edit_csrf_header_name?window.live_edit_csrf_header_name:"X-CSRF-TOKEN"},e.prototype.getCsrfToken=function(){var e=null,t=document.head.querySelector('meta[name="csrf-token"]');return t?e=t.getAttribute("content"):window.live_edit_force_csrf_token?e=window.live_edit_force_csrf_token:window.live_edit_csrf_token?e=window.live_edit_csrf_token:window.csrf_token&&(e=window.csrf_token),e},e.prototype.send=function(){var e=this;return new Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===this.readyState&&t(this)},r.open(e.type.toUpperCase(),e.url,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader(e.getCsrfHeaderName(),e.getCsrfToken()),r.send(e.getData())})},e}();exports.default=e;
},{}],"gGie":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./LiveElement")),i=e(require("./PositionDetector")),s=e(require("./Request")),n=function(){function e(){var e=this;this.isVisible=!1,this.isLoading=!1,this.$classPrefix="live-edit__",this.saveUrl="./live-edit/update",this.isDragged=!1,this.generateElement(),window.addEventListener("scroll",function(){return e.recalculatePosition()}),window.addEventListener("touchmove",function(){return e.recalculatePosition()})}return e.prototype.open=function(e){this.openEditable(e),this.recalculatePosition()},e.prototype.recalculatePosition=function(){this.activeTarget&&this.isVisible&&!this.isDragged&&i.default.findPosition(this.activeTarget,this.liveElement)},e.prototype.openModel=function(){this.element.classList.add(this.$classPrefix+"modal-is-visible"),this.element.classList.remove(this.$classPrefix+"position-dragged"),this.isVisible=!0,this.isDragged=!1},e.prototype.closeModel=function(){this.element.classList.remove(this.$classPrefix+"modal-is-visible"),this.isVisible=!1},e.prototype.generateElement=function(){this.element=document.createElement("div"),this.element.className=this.$classPrefix+"modal",this.liveElement=new t.default(this.element);var e=document.createElement("div");e.className=this.$classPrefix+"modal-wrapper",this.element.appendChild(e),this.elementHandler=document.createElement("div"),this.elementHandler.className=this.$classPrefix+"modal-handler",e.appendChild(this.elementHandler),this.textarea=document.createElement("textarea"),this.textarea.className=this.$classPrefix+"modal-textarea",e.appendChild(this.textarea);var i=document.createElement("div");i.className=this.$classPrefix+"modal-controls",e.appendChild(i),this.buttonCancel=document.createElement("div"),this.buttonCancel.className=this.$classPrefix+"modal-button-cancel",this.buttonCancel.innerText="cancel",i.appendChild(this.buttonCancel),this.buttonSave=document.createElement("div"),this.buttonSave.className=this.$classPrefix+"modal-button-save",this.buttonSave.innerText="SAVE",i.appendChild(this.buttonSave),document.body.appendChild(this.element),this.attachEvents()},e.prototype.attachEvents=function(){var e=this;this.buttonCancel.addEventListener("click",function(){return e.onCancel()}),this.buttonSave.addEventListener("click",function(){return e.onSave()}),this.textarea.addEventListener("keyup",function(){return e.onKeyUp()}),this.elementHandler.addEventListener("mousedown",function(t){return e.dragEditor(t)})},e.prototype.onCancel=function(){return this.getText()===this.originalText?this.doCancel():confirm("Discard changes?")?this.doCancel():void 0},e.prototype.doCancel=function(){this.setTargetOldText(),this.closeModel()},e.prototype.onSave=function(){var t=this;this.saveToServer().then(function(i){i.success?(t.setTargetNewText(),t.closeModel()):e.showError("Invalid server request.")}).catch(function(t){console.error(t),e.showError("Error occurred. See console for more details.")})},e.showError=function(e){void 0===e&&(e="Unexpected error occurred."),alert("LiveEdit: "+e)},e.prototype.setTargetOldText=function(){this.activeTarget.setText(this.originalText)},e.prototype.setTargetNewText=function(){this.activeTarget.setText(this.getText())},e.prototype.onKeyUp=function(){var e=this;this.debounce&&clearTimeout(this.debounce),this.debounce=setTimeout(function(){e.setTargetNewText()},150)},e.prototype.setText=function(e){this.originalText=e,this.textarea.value=this.originalText},e.prototype.getText=function(){return this.textarea.value},e.prototype.openEditable=function(e){this.activeTarget=e,this.setText(this.activeTarget.getText()),this.openModel()},e.prototype.setLoading=function(e){this.isLoading=e,this.buttonSave.classList[e?"add":"remove"](this.$classPrefix+"modal-button-save-is-loading")},e.prototype.saveToServer=function(){var e=this,t="string"==typeof window.live_edit_update_url?window.live_edit_update_url:this.saveUrl;if(!this.isLoading){var i=new s.default;return this.setLoading(!0),new Promise(function(s,n){i.post(t,{request_type:"live-edit-request",key:e.activeTarget.getKey(),content:e.getText()}).then(function(t){200==t.status?s(JSON.parse(t.responseText)):n(t.response),e.setLoading(!1)}).catch(function(t){n(t),e.setLoading(!1)})})}},e.prototype.dragEditor=function(e){var t=this;e||(e=window.event),e.preventDefault(),this.dragPositionX=e.clientX,this.dragPositionY=e.clientY;var i=function(e){return t.startDragging(e)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",function e(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e),t.element.classList.remove(t.$classPrefix+"position-dragging")})},e.prototype.startDragging=function(e){e||(e=window.event),e.preventDefault();var t=this.dragPositionX-e.clientX,i=this.dragPositionY-e.clientY;this.dragPositionX=e.clientX,this.dragPositionY=e.clientY,this.liveElement.setStyle("left",this.element.offsetLeft-t+"px"),this.liveElement.setStyle("top",this.element.offsetTop-i+"px"),this.element.classList.add(this.$classPrefix+"position-dragging"),this.isDragged||(this.isDragged=!0,this.element.classList.add(this.$classPrefix+"position-dragged"))},e}();exports.default=n;
},{"./LiveElement":"AeE5","./PositionDetector":"xB0r","./Request":"hjI6"}],"X9mq":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./core/Editor")),i=e(require("./core/LiveElement")),l=function(){for(var e=document.querySelectorAll("[data-live-edit]"),l=new t.default,n=function(t){var n=new i.default(e[t]);"static"===n.getStyle("position")&&n.setStyle("position","relative",!0),"inline"===n.getStyle("display")&&n.setStyle("display","inline-block",!0),n.on("click",function(e){e.preventDefault(),e.stopPropagation(),l.open(n)})},o=0;o<e.length;o++)n(o)};l();
},{"./core/Editor":"gGie","./core/LiveElement":"AeE5"}]},{},["X9mq"], null)